<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HRA 5: ESCAPE ROOM - Technologick√© centrum</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .room-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .room-btn {
            padding: 12px 24px;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s;
            font-size: 16px;
        }

        .room-btn:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }

        .room-btn.active {
            background: #4CAF50;
            border-color: #4CAF50;
        }

        .room-btn.completed {
            background: #2196F3;
            border-color: #2196F3;
        }

        .room {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            display: none;
        }

        .room.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .room h2 {
            color: #FFD700;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .problem {
            background: rgba(255,0,0,0.1);
            border-left: 4px solid #ff4444;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .puzzle-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .puzzle-piece {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            user-select: none;
            font-size: 14px;
        }

        .puzzle-piece:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.05);
        }

        .puzzle-piece.selected {
            background: #FFD700;
            color: #000;
            border-color: #FFD700;
        }

        .sequence-display {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .sequence-item {
            display: inline-block;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 5px;
            padding: 15px;
            margin: 5px;
            min-width: 100px;
            min-height: 60px;
            vertical-align: top;
            font-size: 12px;
        }

        .btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: all 0.3s;
        }

        .btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }

        .btn.reset {
            background: #ff6b6b;
        }

        .btn.reset:hover {
            background: #ff5252;
        }

        .success {
            background: rgba(76, 175, 80, 0.2);
            border: 2px solid #4CAF50;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin: 20px 0;
            display: none;
        }

        .success.show {
            display: block;
            animation: successPulse 0.8s;
        }

        @keyframes successPulse {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        .timer {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            padding: 15px;
            border-radius: 10px;
            font-size: 1.2em;
            z-index: 1000;
        }

        .progress {
            text-align: center;
            margin: 20px 0;
            font-size: 1.1em;
        }

        .code-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .code-card {
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Courier New', monospace;
            text-align: center;
        }

        .code-card:hover {
            background: rgba(255,255,255,0.2);
        }

        .code-card.selected {
            background: #FFD700;
            color: #000;
        }

        .defect-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .defect-item {
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .defect-item:hover {
            background: rgba(255,255,255,0.2);
        }

        .defect-item.selected {
            background: #FFD700;
            color: #000;
        }

        .energy-config {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .energy-item {
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }

        .energy-slider {
            width: 100%;
            margin: 15px 0;
        }

        .energy-value {
            font-weight: bold;
            color: #FFD700;
            font-size: 1.2em;
        }

        .tech-info {
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-size: 14px;
        }

        .optimal-display {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîê ESCAPE ROOM: Technologick√© centrum</h1>
        
        <div class="timer" id="timer">‚è∞ ƒåas: 60:00</div>
        
        <div class="progress">
            <strong>Postup:</strong> <span id="progress">0/4 m√≠stnost√≠ dokonƒçeno</span>
        </div>

        <div class="room-selector">
            <button class="room-btn active" onclick="showRoom('room1')">M√≠stnost 1: ERP Syst√©m</button>
            <button class="room-btn" onclick="showRoom('room2')">M√≠stnost 2: Robotika</button>
            <button class="room-btn" onclick="showRoom('room3')">M√≠stnost 3: AI Kontrola</button>
            <button class="room-btn" onclick="showRoom('room4')">M√≠stnost 4: Energie</button>
        </div>

        <!-- M√çSTNOST 1: ERP SYST√âM -->
        <div class="room active" id="room1">
            <h2>üñ•Ô∏è M√çSTNOST 1: ERP SYST√âM</h2>
            <div class="problem">
                <strong>PROBL√âM:</strong> Firemn√≠ ERP syst√©m se zhroutil kv≈Øli chybƒõ v datab√°zi! 
                Komponenty syst√©mu jsou rozh√°zen√©. Se≈ôaƒète je do spr√°vn√©ho po≈ôad√≠ pro obnovu syst√©mu 
                podle logick√© architektury: Hardware ‚Üí S√≠≈• ‚Üí Datab√°ze ‚Üí Aplikace ‚Üí U≈æivatel√©
            </div>

            <h3>Dostupn√© komponenty syst√©mu (kliknƒõte pro v√Ωbƒõr):</h3>
            <div class="puzzle-grid" id="erp-pieces">
                <div class="puzzle-piece" onclick="selectERPPiece(this)" data-step="A">
                    üîê U≈æivatelsk√© √∫ƒçty<br>
                    <small>Aktivace p≈ô√≠stup≈Ø pro zamƒõstnance</small>
                </div>
                <div class="puzzle-piece" onclick="selectERPPiece(this)" data-step="B">
                    üíæ Datab√°zov√© slu≈æby<br>
                    <small>Naƒçten√≠ dat a index≈Ø</small>
                </div>
                <div class="puzzle-piece" onclick="selectERPPiece(this)" data-step="C">
                    üåê S√≠≈•ov√© protokoly<br>
                    <small>TCP/IP a komunikaƒçn√≠ kan√°ly</small>
                </div>
                <div class="puzzle-piece" onclick="selectERPPiece(this)" data-step="D">
                    ‚ö° Hardware inicializace<br>
                    <small>Spu≈°tƒõn√≠ server≈Ø a z√°kladn√≠ HW</small>
                </div>
                <div class="puzzle-piece" onclick="selectERPPiece(this)" data-step="E">
                    üîí Bezpeƒçnostn√≠ moduly<br>
                    <small>Firewall a autentifikace</small>
                </div>
                <div class="puzzle-piece" onclick="selectERPPiece(this)" data-step="F">
                    üì± Aplikaƒçn√≠ vrstva<br>
                    <small>ERP aplikace a rozhran√≠</small>
                </div>
            </div>

            <h3>Va≈°e sekvence obnovy (6 krok≈Ø):</h3>
            <div class="sequence-display" id="erp-sequence">
                <div class="sequence-item">Krok 1</div>
                <div class="sequence-item">Krok 2</div>
                <div class="sequence-item">Krok 3</div>
                <div class="sequence-item">Krok 4</div>
                <div class="sequence-item">Krok 5</div>
                <div class="sequence-item">Krok 6</div>
            </div>

            <button class="btn" onclick="checkERPSolution()">üîç Spustit obnovu syst√©mu</button>
            <button class="btn reset" onclick="resetERP()">üîÑ Reset</button>

            <div class="success" id="erp-success">
                ‚úÖ <strong>SYST√âM OBNOVEN!</strong><br>
                üéµ *Zvuk syst√©mu: "System restored successfully"*<br>
                üíö Zelen√© svƒõtlo se rozsv√≠tilo - ERP syst√©m funguje!
            </div>
        </div>

        <!-- M√çSTNOST 2: ROBOTICK√â PROGRAMOV√ÅN√ç -->
        <div class="room" id="room2">
            <h2>ü§ñ M√çSTNOST 2: ROBOTICK√â PROGRAMOV√ÅN√ç</h2>
            <div class="problem">
                <strong>PROBL√âM:</strong> V√Ωrobn√≠ robot ztratil sv≈Øj program! Mus√≠te sestavit spr√°vnou sekvenci 
                p≈ô√≠kaz≈Ø pro automatizovanou v√Ωrobu. Robot mus√≠: dojet na pozici ‚Üí vz√≠t materi√°l ‚Üí 
                p≈ôesunout do stroje ‚Üí spustit v√Ωrobu ‚Üí vr√°tit hotov√Ω v√Ωrobek
            </div>

            <h3>Dostupn√© programovac√≠ karty:</h3>
            <div class="code-cards" id="robot-cards">
                <div class="code-card" onclick="selectRobotCard(this)" data-cmd="NAVIGATE_TO_POSITION">
                    NAVIGATE_TO_POSITION<br>üéØ<br>
                    <small>Pohyb na c√≠lovou pozici</small>
                </div>
                <div class="code-card" onclick="selectRobotCard(this)" data-cmd="PICK_MATERIAL">
                    PICK_MATERIAL<br>ü§è<br>
                    <small>Uchopen√≠ materi√°lu</small>
                </div>
                <div class="code-card" onclick="selectRobotCard(this)" data-cmd="MOVE_TO_MACHINE">
                    MOVE_TO_MACHINE<br>üè≠<br>
                    <small>Transport ke stroji</small>
                </div>
                <div class="code-card" onclick="selectRobotCard(this)" data-cmd="ACTIVATE_PRODUCTION">
                    ACTIVATE_PRODUCTION<br>‚öôÔ∏è<br>
                    <small>Spu≈°tƒõn√≠ v√Ωrobn√≠ho cyklu</small>
                </div>
                <div class="code-card" onclick="selectRobotCard(this)" data-cmd="RETURN_PRODUCT">
                    RETURN_PRODUCT<br>üì¶<br>
                    <small>Vr√°cen√≠ hotov√©ho v√Ωrobku</small>
                </div>
                <div class="code-card" onclick="selectRobotCard(this)" data-cmd="WAIT_CYCLE">
                    WAIT_CYCLE<br>‚è±Ô∏è<br>
                    <small>ƒåek√°n√≠ na dokonƒçen√≠</small>
                </div>
            </div>

            <h3>V√°≈° program (5 p≈ô√≠kaz≈Ø):</h3>
            <div class="sequence-display" id="robot-sequence">
                <div class="sequence-item">P≈ô√≠kaz 1</div>
                <div class="sequence-item">P≈ô√≠kaz 2</div>
                <div class="sequence-item">P≈ô√≠kaz 3</div>
                <div class="sequence-item">P≈ô√≠kaz 4</div>
                <div class="sequence-item">P≈ô√≠kaz 5</div>
            </div>

            <button class="btn" onclick="checkRobotSolution()">üîç Spustit robotick√Ω program</button>
            <button class="btn reset" onclick="resetRobot()">üîÑ Reset</button>

            <div class="success" id="robot-success">
                ‚úÖ <strong>ROBOT NAPROGRAMOV√ÅN!</strong><br>
                ü§ñ *Robot √∫spƒõ≈°nƒõ dokonƒçil v√Ωrobn√≠ cyklus*<br>
                üíö Automatizace obnovena - v√Ωrobn√≠ linka funguje!
            </div>
        </div>

        <!-- M√çSTNOST 3: AI QUALITY CONTROL -->
        <div class="room" id="room3">
            <h2>üß† M√çSTNOST 3: AI QUALITY CONTROL</h2>
            <div class="problem">
                <strong>PROBL√âM:</strong> AI syst√©m kontroly kvality detekoval anom√°lie, ale ztratil schopnost 
                rozpozn√°vat typy defekt≈Ø! Mus√≠te identifikovat a oznaƒçit v≈°echny typy vad, 
                kter√© syst√©m nalezl v dod√°vce v√Ωrobk≈Ø.
            </div>

            <div class="tech-info">
                <strong>DODAN√Å DATA od AI syst√©mu:</strong><br>
                üìä Celkem skenov√°no: 1000 v√Ωrobk≈Ø<br>
                ‚ùå Detekov√°no: 89 defektn√≠ch kus≈Ø<br>
                üîç Nalezen√© typy vad: Praskliny, Deformace, Nedostateƒçn√° tlou≈°≈•ka, Chybƒõj√≠c√≠ souƒç√°sti, ≈†patn√° barva
            </div>

            <h3>Oznaƒçte V≈†ECHNY typy defekt≈Ø nalezen√© v dod√°vce:</h3>
            <div class="defect-grid" id="defect-items">
                <div class="defect-item" onclick="selectDefect(this)" data-defect="praskliny">
                    üîç Praskliny<br>
                    <small>Povrchov√© trhliny</small>
                </div>
                <div class="defect-item" onclick="selectDefect(this)" data-defect="deformace">
                    üìê Deformace<br>
                    <small>Zmƒõna tvaru</small>
                </div>
                <div class="defect-item" onclick="selectDefect(this)" data-defect="tloustka">
                    üìè Nedostateƒçn√° tlou≈°≈•ka<br>
                    <small>Pod limit. hodnotou</small>
                </div>
                <div class="defect-item" onclick="selectDefect(this)" data-defect="soucastky">
                    üß© Chybƒõj√≠c√≠ souƒç√°sti<br>
                    <small>Ne√∫pln√Ω v√Ωrobek</small>
                </div>
                <div class="defect-item" onclick="selectDefect(this)" data-defect="barva">
                    üé® ≈†patn√° barva<br>
                    <small>Barevn√° odchylka</small>
                </div>
                <div class="defect-item" onclick="selectDefect(this)" data-defect="koroze">
                    ü¶† Koroze<br>
                    <small>Povrchov√° koroze</small>
                </div>
                <div class="defect-item" onclick="selectDefect(this)" data-defect="rozmer">
                    üìä Chybn√Ω rozmƒõr<br>
                    <small>Mimo toleranci</small>
                </div>
                <div class="defect-item" onclick="selectDefect(this)" data-defect="vypln">
                    üï≥Ô∏è Dutiny/Bubliny<br>
                    <small>Vnit≈ôn√≠ defekty</small>
                </div>
            </div>

            <button class="btn" onclick="checkAISolution()">üîç Potvrdit anal√Ωzu defekt≈Ø</button>
            <button class="btn reset" onclick="resetAI()">üîÑ Reset</button>

            <div class="success" id="ai-success">
                ‚úÖ <strong>AI SYST√âM ZKALIBROV√ÅN!</strong><br>
                üß† *V≈°echny typy defekt≈Ø spr√°vnƒõ identifikov√°ny*<br>
                üíö Kontrola kvality obnovena - AI syst√©m funguje!
            </div>
        </div>

        <!-- M√çSTNOST 4: ENERGETICK√â CENTRUM -->
        <div class="room" id="room4">
            <h2>‚ö° M√çSTNOST 4: ENERGETICK√â CENTRUM</h2>
            <div class="problem">
                <strong>PROBL√âM:</strong> Energetick√° s√≠≈• je kriticky p≈ôet√≠≈æen√°! Mus√≠te naj√≠t optim√°ln√≠ 
                konfiguraci v≈°ech technologi√≠ tak, aby celkov√° spot≈ôeba nep≈ôes√°hla dostupn√Ωch 100kW 
                a p≈ôitom v≈°echny syst√©my fungovaly efektivnƒõ.
            </div>

            <div class="tech-info">
                <strong>TECHNOLOGIE A JEJICH SPOT≈òEBA:</strong><br>
                üñ•Ô∏è <strong>Servery:</strong> 15-40kW (minimum 25kW pro pln√Ω provoz)<br>
                ü§ñ <strong>Robotika:</strong> 10-35kW (minimum 20kW pro produkci)<br>
                üí° <strong>Osvƒõtlen√≠:</strong> 5-20kW (minimum 8kW pro bezpeƒçnost)<br>
                ‚ùÑÔ∏è <strong>Klimatizace:</strong> 8-30kW (minimum 15kW pro servery)<br>
                üè≠ <strong>V√Ωroba:</strong> 12-45kW (minimum 25kW pro efektivitu)
            </div>

            <h3>Nastavte optim√°ln√≠ distribuci energie:</h3>
            <div class="energy-config">
                <div class="energy-item">
                    <h4>üñ•Ô∏è Servery</h4>
                    <input type="range" class="energy-slider" min="15" max="40" value="30" 
                           onchange="updateEnergy('servers', this.value)">
                    <div class="energy-value" id="servers-value">30kW</div>
                    <small>Optimum: 25kW+</small>
                </div>
                <div class="energy-item">
                    <h4>ü§ñ Robotika</h4>
                    <input type="range" class="energy-slider" min="10" max="35" value="25" 
                           onchange="updateEnergy('robotics', this.value)">
                    <div class="energy-value" id="robotics-value">25kW</div>
                    <small>Optimum: 20kW+</small>
                </div>
                <div class="energy-item">
                    <h4>üí° Osvƒõtlen√≠</h4>
                    <input type="range" class="energy-slider" min="5" max="20" value="12" 
                           onchange="updateEnergy('lighting', this.value)">
                    <div class="energy-value" id="lighting-value">12kW</div>
                    <small>Optimum: 8kW+</small>
                </div>
                <div class="energy-item">
                    <h4>‚ùÑÔ∏è Klimatizace</h4>
                    <input type="range" class="energy-slider" min="8" max="30" value="18" 
                           onchange="updateEnergy('hvac', this.value)">
                    <div class="energy-value" id="hvac-value">18kW</div>
                    <small>Optimum: 15kW+</small>
                </div>
                <div class="energy-item">
                    <h4>üè≠ V√Ωroba</h4>
                    <input type="range" class="energy-slider" min="12" max="45" value="30" 
                           onchange="updateEnergy('production', this.value)">
                    <div class="energy-value" id="production-value">30kW</div>
                    <small>Optimum: 25kW+</small>
                </div>
            </div>

            <div class="optimal-display">
                <strong>Celkov√° spot≈ôeba: </strong>
                <span id="total-consumption" style="color: #FFD700; font-size: 1.3em;">115kW</span> / 100kW<br>
                <span id="energy-status" style="color: #ff4444;">‚ö†Ô∏è P≈òET√ç≈ΩEN√ç S√çTƒö</span>
            </div>

            <button class="btn" onclick="checkEnergySolution()">üîç Aplikovat energetickou konfiguraci</button>
            <button class="btn reset" onclick="resetEnergy()">üîÑ Reset na v√Ωchoz√≠</button>

            <div class="success" id="energy-success">
                ‚úÖ <strong>OPTIM√ÅLN√ç KONFIGURACE NALEZENA!</strong><br>
                ‚ö° *V≈°echny syst√©my funguj√≠ efektivnƒõ v r√°mci limitu*<br>
                üíö Energetick√° s√≠≈• stabilizov√°na - centrum plnƒõ funkƒçn√≠!
            </div>
        </div>

        <!-- FIN√ÅLN√ç ZPR√ÅVA -->
        <div class="success" id="final-success" style="display: none;">
            üéâ <strong>MISE DOKONƒåENA!</strong><br>
            üèÜ √öspƒõ≈°nƒõ jste obnovili cel√© technologick√© centrum!<br>
            üîì V≈°echny syst√©my jsou plnƒõ funkƒçn√≠ a optimalizovan√©!<br>
            ‚è∞ V√°≈° ƒças: <span id="final-time"></span><br>
            üéñÔ∏è Jste skuteƒçn√Ω technologick√Ω expert!
        </div>
    </div>

    <script>
        let gameState = {
            currentRoom: 'room1',
            completedRooms: [],
            startTime: Date.now(),
            erpSequence: [],
            robotSequence: [],
            aiSelected: [],
            energyConfig: {
                servers: 30,
                robotics: 25,
                lighting: 12,
                hvac: 18,
                production: 30
            }
        };

        // Timer
        function updateTimer() {
            const elapsed = Math.floor((Date.now() - gameState.startTime) / 1000);
            const remaining = Math.max(0, 3600 - elapsed);
            const minutes = Math.floor(remaining / 60);
            const seconds = remaining % 60;
            document.getElementById('timer').textContent = 
                `‚è∞ ƒåas: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            if (remaining > 0) {
                setTimeout(updateTimer, 1000);
            }
        }
        updateTimer();

        function showRoom(roomId) {
            document.querySelectorAll('.room').forEach(room => room.classList.remove('active'));
            document.querySelectorAll('.room-btn').forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(roomId).classList.add('active');
            event.target.classList.add('active');
            gameState.currentRoom = roomId;
        }

        function updateProgress() {
            document.getElementById('progress').textContent = 
                `${gameState.completedRooms.length}/4 m√≠stnost√≠ dokonƒçeno`;
            
            if (gameState.completedRooms.length === 4) {
                showFinalSuccess();
            }
        }

        function completeRoom(roomId) {
            if (!gameState.completedRooms.includes(roomId)) {
                gameState.completedRooms.push(roomId);
                document.querySelector(`[onclick="showRoom('${roomId}')"]`).classList.add('completed');
                updateProgress();
            }
        }

        function showFinalSuccess() {
            const elapsed = Math.floor((Date.now() - gameState.startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            document.getElementById('final-time').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('final-success').style.display = 'block';
        }

        // M√çSTNOST 1: ERP SYST√âM
        function selectERPPiece(element) {
            if (gameState.erpSequence.length < 6) {
                gameState.erpSequence.push({
                    step: element.dataset.step,
                    text: element.textContent.trim()
                });
                element.style.opacity = '0.5';
                element.style.pointerEvents = 'none';
                updateERPSequence();
            }
        }

        function updateERPSequence() {
            const sequenceItems = document.querySelectorAll('#erp-sequence .sequence-item');
            sequenceItems.forEach((item, index) => {
                if (gameState.erpSequence[index]) {
                    item.innerHTML = `<strong>Krok ${index + 1}:</strong><br>${gameState.erpSequence[index].text}`;
                    item.style.background = 'rgba(255, 215, 0, 0.3)';
                } else {
                    item.innerHTML = `Krok ${index + 1}`;
                    item.style.background = 'rgba(255,255,255,0.1)';
                }
            });
        }

        function checkERPSolution() {
            // Spr√°vn√° sekvence: D-C-B-E-F-A (Hardware ‚Üí S√≠≈• ‚Üí Datab√°ze ‚Üí Bezpeƒçnost ‚Üí Aplikace ‚Üí U≈æivatel√©)
            const correctSequence = ['D', 'C', 'B', 'E', 'F', 'A'];
            const userSequence = gameState.erpSequence.map(item => item.step);
            
            if (JSON.stringify(correctSequence) === JSON.stringify(userSequence)) {
                document.getElementById('erp-success').classList.add('show');
                completeRoom('room1');
            } else {
                alert('‚ùå Nespr√°vn√° sekvence obnovy! Tip: Syst√©m se stav√≠ od z√°kladu - nejprve hardware a s√≠≈•, pak data a aplikace, nakonec u≈æivatel√©.');
            }
        }

        function resetERP() {
            document.querySelectorAll('#erp-pieces .puzzle-piece').forEach(el => {
                el.style.opacity = '1';
                el.style.pointerEvents = 'auto';
            });
            gameState.erpSequence = [];
            updateERPSequence();
            document.getElementById('erp-success').classList.remove('show');
        }

        // M√çSTNOST 2: ROBOTICK√â PROGRAMOV√ÅN√ç
        function selectRobotCard(element) {
            if (gameState.robotSequence.length < 5) {
                gameState.robotSequence.push({
                    cmd: element.dataset.cmd,
                    text: element.textContent.trim()
                });
                element.style.opacity = '0.5';
                element.style.pointerEvents = 'none';
                updateRobotSequence();
            }
        }

        function updateRobotSequence() {
            const sequenceItems = document.querySelectorAll('#robot-sequence .sequence-item');
            sequenceItems.forEach((item, index) => {
                if (gameState.robotSequence[index]) {
                    item.innerHTML = `<strong>P≈ô√≠kaz ${index + 1}:</strong><br>${gameState.robotSequence[index].text}`;
                    item.style.background = 'rgba(255, 215, 0, 0.3)';
                } else {
                    item.innerHTML = `P≈ô√≠kaz ${index + 1}`;
                    item.style.background = 'rgba(255,255,255,0.1)';
                }
            });
        }

        function checkRobotSolution() {
            // Spr√°vn√° sekvence podle zad√°n√≠: NAVIGATE_TO_POSITION ‚Üí PICK_MATERIAL ‚Üí MOVE_TO_MACHINE ‚Üí ACTIVATE_PRODUCTION ‚Üí RETURN_PRODUCT
            const correctSequence = ['NAVIGATE_TO_POSITION', 'PICK_MATERIAL', 'MOVE_TO_MACHINE', 'ACTIVATE_PRODUCTION', 'RETURN_PRODUCT'];
            const userSequence = gameState.robotSequence.map(item => item.cmd);
            
            if (JSON.stringify(correctSequence) === JSON.stringify(userSequence)) {
                document.getElementById('robot-success').classList.add('show');
                completeRoom('room2');
            } else {
                alert('‚ùå Program nefunguje! Tip: Robot mus√≠ nejprve dojet na pozici, vz√≠t materi√°l, p≈ôesunout ho ke stroji, spustit v√Ωrobu a vr√°tit v√Ωrobek.');
            }
        }

        function resetRobot() {
            gameState.robotSequence = [];
            document.querySelectorAll('#robot-cards .code-card').forEach(card => {
                card.style.opacity = '1';
                card.style.pointerEvents = 'auto';
            });
            updateRobotSequence();
            document.getElementById('robot-success').classList.remove('show');
        }

        // M√çSTNOST 3: AI QUALITY CONTROL
        function selectDefect(element) {
            element.classList.toggle('selected');
            const defectType = element.dataset.defect;
            
            if (element.classList.contains('selected')) {
                if (!gameState.aiSelected.includes(defectType)) {
                    gameState.aiSelected.push(defectType);
                }
            } else {
                gameState.aiSelected = gameState.aiSelected.filter(item => item !== defectType);
            }
        }

        function checkAISolution() {
            // Podle zad√°n√≠ v DODAN√ùCH DATECH: Praskliny, Deformace, Nedostateƒçn√° tlou≈°≈•ka, Chybƒõj√≠c√≠ souƒç√°sti, ≈†patn√° barva
            const correctDefects = ['praskliny', 'deformace', 'tloustka', 'soucastky', 'barva'];
            const userSelected = [...gameState.aiSelected].sort();
            const correctSelected = [...correctDefects].sort();
            
            if (JSON.stringify(correctSelected) === JSON.stringify(userSelected)) {
                document.getElementById('ai-success').classList.add('show');
                completeRoom('room3');
            } else {
                alert('‚ùå Nespr√°vn√° anal√Ωza! P≈ôeƒçtƒõte si pozornƒõ DODAN√Å DATA od AI syst√©mu - obsahuj√≠ p≈ôesn√Ω v√Ωƒçet nalezen√Ωch typ≈Ø defekt≈Ø.');
            }
        }

        function resetAI() {
            document.querySelectorAll('#defect-items .defect-item').forEach(item => {
                item.classList.remove('selected');
            });
            gameState.aiSelected = [];
            document.getElementById('ai-success').classList.remove('show');
        }

        // M√çSTNOST 4: ENERGETICK√â CENTRUM
        function updateEnergy(system, value) {
            gameState.energyConfig[system] = parseInt(value);
            document.getElementById(`${system}-value`).textContent = `${value}kW`;
            
            const total = Object.values(gameState.energyConfig).reduce((sum, val) => sum + val, 0);
            const totalElement = document.getElementById('total-consumption');
            const statusElement = document.getElementById('energy-status');
            
            totalElement.textContent = `${total}kW`;
            
            if (total > 100) {
                totalElement.style.color = '#ff4444';
                statusElement.innerHTML = '‚ö†Ô∏è P≈òET√ç≈ΩEN√ç S√çTƒö';
                statusElement.style.color = '#ff4444';
            } else if (total === 100) {
                totalElement.style.color = '#FFD700';
                statusElement.innerHTML = '‚úÖ LIMIT DOSA≈ΩEN';
                statusElement.style.color = '#4CAF50';
            } else {
                totalElement.style.color = '#4CAF50';
                statusElement.innerHTML = '‚úÖ V PO≈ò√ÅDKU';
                statusElement.style.color = '#4CAF50';
            }
        }

        function checkEnergySolution() {
            const config = gameState.energyConfig;
            const total = Object.values(config).reduce((sum, val) => sum + val, 0);
            
            // Optim√°ln√≠ konfigurace: servery‚â•25, robotika‚â•20, osvƒõtlen√≠‚â•8, klimatizace‚â•15, v√Ωroba‚â•25, celkem‚â§100
            if (total <= 100 && 
                config.servers >= 25 && 
                config.robotics >= 20 && 
                config.lighting >= 8 && 
                config.hvac >= 15 && 
                config.production >= 25) {
                document.getElementById('energy-success').classList.add('show');
                completeRoom('room4');
            } else {
                let message = '‚ùå Konfigurace nen√≠ optim√°ln√≠!\n\nPo≈æadavky:\n';
                message += `‚Ä¢ Servery: min 25kW (aktu√°lnƒõ ${config.servers}kW)\n`;
                message += `‚Ä¢ Robotika: min 20kW (aktu√°lnƒõ ${config.robotics}kW)\n`;
                message += `‚Ä¢ Osvƒõtlen√≠: min 8kW (aktu√°lnƒõ ${config.lighting}kW)\n`;
                message += `‚Ä¢ Klimatizace: min 15kW (aktu√°lnƒõ ${config.hvac}kW)\n`;
                message += `‚Ä¢ V√Ωroba: min 25kW (aktu√°lnƒõ ${config.production}kW)\n`;
                message += `‚Ä¢ Celkov√° spot≈ôeba: max 100kW (aktu√°lnƒõ ${total}kW)`;
                alert(message);
            }
        }

        function resetEnergy() {
            gameState.energyConfig = {
                servers: 30,
                robotics: 25,
                lighting: 12,
                hvac: 18,
                production: 30
            };
            
            document.querySelector('[onchange*="servers"]').value = 30;
            document.querySelector('[onchange*="robotics"]').value = 25;
            document.querySelector('[onchange*="lighting"]').value = 12;
            document.querySelector('[onchange*="hvac"]').value = 18;
            document.querySelector('[onchange*="production"]').value = 30;
            
            Object.keys(gameState.energyConfig).forEach(system => {
                updateEnergy(system, gameState.energyConfig[system]);
            });
            
            document.getElementById('energy-success').classList.remove('show');
        }

        // Inicializace energetick√©ho syst√©mu
        updateEnergy('servers', 30);
        updateEnergy('robotics', 25);
        updateEnergy('lighting', 12);
        updateEnergy('hvac', 18);
        updateEnergy('production', 30);
    </script>
</body>
</html>